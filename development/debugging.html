<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8"/>
    <meta http-equiv="X-UA-Compatible" content="IE=edge"/>
    <meta name="viewport" content="width=device-width, initial-scale=1"/>
    <title>Debugging</title>
    
        <link rel="icon"
              href="../_static/kaybee_logo.png"/>
    
    <link rel="stylesheet" href="../_static/kaybee_bulma.css"/>
    <script defer src="../_static/kaybee_bulma.js"></script>
    <script defer src="https://use.fontawesome.com/releases/v5.0.7/js/all.js"></script>
</head>
<body>

<section>
    <nav id="kbb-navbar" class="navbar is-info"
     role="navigation" aria-label="main navigation">
    <div class="navbar-brand">
        <a class="navbar-item" href="../index.html">
            
            <img src="../_static/kaybee_logo.png"
                 alt="Kaybee Logo Alt">
        </a>
        <button class="button navbar-burger" data-target="navMenu">
            <span></span>
            <span></span>
            <span></span>
        </button>
    </div>
    <div class="navbar-menu" id="navMenu">
        <div class="navbar-start">
            
                <a class="navbar-item"
                   href="../features.html">
                    Features
                </a>
            
                <a class="navbar-item"
                   href="../using/index.html">
                    Using
                </a>
            
                <a class="navbar-item"
                   href="../articles/index.html">
                    Articles
                </a>
            
                <a class="navbar-item"
                   href="../extending/index.html">
                    Extending
                </a>
            
                <a class="navbar-item is-active"
                   href="index.html">
                    Developing
                </a>
            
                <a class="navbar-item"
                   href="../implementation/index.html">
                    Implementation
                </a>
            
                <a class="navbar-item"
                   href="../categories/index.html">
                    Categories
                </a>
            
                <a class="navbar-item"
                   href="../authors/index.html">
                    Authors
                </a>
            
                <a class="navbar-item"
                   href="../topics/index.html">
                    Topics
                </a>
            

        </div>

        <div class="navbar-end">
            
                <a class="navbar-item" id="kbb-config-github"
                   href="https://github.com/pauleveritt/kaybee">
                <span class="icon has-text-black">
                    <i class="fab fa-github" aria-hidden="true"></i>
                </span>
                </a>
            
            
                <a class="navbar-item" id="kbb-config-twitter"
                   href="https://twitter.com/https://twitter.com/paulweveritt">
                <span class="icon danger">
                    <i class="fab fa-twitter" aria-hidden="true"></i>
                </span>
                </a>
            
        </div>
    </div>
</nav>
</section>
<section
        class="hero is-info"
        style="">
    <div class="hero-head">
    </div>
    
</section>

<section class="section content article"
         id="kbb-sphinx-body">
    
    <div class="container">
        <div class="columns">
            <div class="column sb_body">
                <div class="title is-1">Debugging</div>
                <div id="kbb-sphinx-body"><div class="section" id="debugging">
<h1>Debugging<a class="headerlink" href="#debugging" title="Permalink to this headline">¶</a></h1>
<p>Most of your Kaybee development will involve making mistakes.
Which means most of your time is spent debugging.</p>
<div class="section" id="debugdump">
<span id="debugdump-dev"></span><h2>Debugdump<a class="headerlink" href="#debugdump" title="Permalink to this headline">¶</a></h2>
<p>It can be hard to find out what’s going on with your Kaybee configuration and
state. What is the <code class="docutils literal notranslate"><span class="pre">published</span></code> value on a certain resource? Unit testing
isn’t always the right fit, running Sphinx and guessing at the output is
frustrating, and making an integration test helps but you have to look at
the HTML rendering.</p>
<p>Or do you? The <code class="docutils literal notranslate"><span class="pre">debugdump</span></code> plugin serializes a JSON representation of your
entire system, into a single file. When combined with JSON-oriented
integration tests, this is a key tool during development.</p>
<p>To use it, write some code like this:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="nd">@kb_app.dumper</span><span class="p">(</span><span class="s1">&#39;resources&#39;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">handle_event</span><span class="p">(</span><span class="n">kb_app</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
    <span class="k">return</span> <span class="nb">dict</span><span class="p">(</span>
        <span class="n">resource</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span>
            <span class="n">published</span><span class="o">=</span><span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span>

        <span class="p">)</span>
    <span class="p">)</span>
</pre></div>
</div>
<p>The dict you return will be merged with the dicts from all the other
callbacks and written to <code class="docutils literal notranslate"><span class="pre">debug_dump.json</span></code> in the output directory. You
can then write integration test fixtures which load this file, letting you
easily make assertions about the state of the system.</p>
<p>For more information, read about the
<a class="reference internal" href="../implementation/debugdump.html#debugdump-implementation"><span class="std std-ref">implementation of debugdump</span></a>.</p>
</div>
<div class="section" id="use-the-debugger">
<h2>Use the Debugger<a class="headerlink" href="#use-the-debugger" title="Permalink to this headline">¶</a></h2>
<p>PyCharm’s debugger is very fast, especially for Python 3.6+ projects (and
Kaybee requires Python 3.6+). Most of the time I just run under the debugger.
I can then set a breakpoint and look at stuff without the context switch of
changing “modes”.</p>
<p>As a note, when running tests under the debugger, the nice graphical test
window is under the “Console” tab. You can get to the console prompt, but due
to a bug, it doesn’t show output. You’re better off using PyCharm’s graphical
<code class="docutils literal notranslate"><span class="pre">Evaluate</span> <span class="pre">Expression</span></code> tool.</p>
<p>When you’re at a breakpoint in PyCharm, remember that you can quickly spot
variable values with the psuedo-comments PyCharm inserts in your code.</p>
<p>When running your integration tests, remember to use the debugger there as
well, as it is a very productive mode to figure out what’s going on.</p>
</div>
</div>
</div>

                
                
            </div>

            <div class="column is-3">
                <aside id="sidebarCollapseTarget" class="menu kbb-sidenav">

    <div id="kb-sidenav-published-heading">
    

    
        <p class="menu-label">
            Published
        </p>
        <ul class="menu-list">
            <li>
                Published on
                2018-01-02
                at
                12:01
                
            </li>
        </ul>
    
</div>
    

    <p class="menu-label">
        Breadcrumbs
    </p>
    <ul class="menu-list">
            <li>
                <a href="index.html">
                    
                        <span class="kb-breadcrumb-separator">></span>
                    
                    Kaybee Development
                </a>
            </li>

    </ul>

    
    <p class="menu-label">
        Previous
    </p>
    <ul class="menu-list">
        <a href="setup.html"
           title="previous chapter">Development Setup</a>
    </ul>



    <p class="menu-label">
        Next
    </p>
    <ul class="menu-list">
        <a href="testing.html"
           title="next chapter">Testing</a>
    </ul>


    
    
        <div>
            <p class="menu-label">
                <span style="text-transform: uppercase">topic</span>
            </p>
            <p>
                
                    <a href="../topics/debugging.html">
                        <span class="tag">debugging</span>
                    </a>
                
            </p>
        </div>
    



</aside>
            </div>
        </div>
    </div>

</section>

<footer class="footer is-info">
    <div class="container">
        <div class="content has-text-centered">
            <p>
                Powered by Kaybee, which uses
                <a href="http://www.sphinx-doc.org/en/stable/">Sphinx</a>,
                <a href="http://bulma.io">Bulma</a>,
                <a href="http://dectate.readthedocs.io/en/latest/">Dectate</a>,
                <a href="https://pydantic-docs.helpmanual.io">pydantic</a>,
                and more.
            </p>
            <p id="kb-config-copyright">
                &copy; 2018, All Rights Reserved
            </p>
        </div>
    </div>
</footer>
<script type="text/javascript">
    var DOCUMENTATION_OPTIONS = {
        URL_ROOT: '',
        VERSION: '0.1.17',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true,
        SOURCELINK_SUFFIX: '.txt'
    };
</script>

</body>
</html>
