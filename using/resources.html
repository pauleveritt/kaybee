<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8"/>
    <meta http-equiv="X-UA-Compatible" content="IE=edge"/>
    <meta name="viewport" content="width=device-width, initial-scale=1"/>
    <title>Resources</title>
    
        <link rel="icon"
              href="../_static/kaybee_logo.png"/>
    
    <link href="https://use.fontawesome.com/releases/v5.0.6/css/all.css"
          rel="stylesheet">
    <script src="../_static/kaybee_bulma.bundle.js"></script>
    <script src="../_static/app.bundle.js"></script>
</head>
<body>

<section>
    <nav id="kbb-navbar" class="navbar is-light"
     role="navigation" aria-label="main navigation">
    <div class="navbar-brand">
        <a class="navbar-item" href="../index.html">
            
            <img src="../_static/kaybee_logo.png"
                 alt="Kaybee Logo Alt">
        </a>
        <button class="button navbar-burger" data-target="navMenu">
            <span></span>
            <span></span>
            <span></span>
        </button>
    </div>
    <div class="navbar-menu" id="navMenu">
        <div class="navbar-start">
            
                <a class="navbar-item"
                   href="../features.html">
                    Features
                </a>
            
                <a class="navbar-item is-active"
                   href="index.html">
                    Using
                </a>
            
                <a class="navbar-item"
                   href="../articles/index.html">
                    Articles
                </a>
            
                <a class="navbar-item"
                   href="../extending/index.html">
                    Extending
                </a>
            
                <a class="navbar-item"
                   href="../development/index.html">
                    Developing
                </a>
            
                <a class="navbar-item"
                   href="../implementation/index.html">
                    Implementation
                </a>
            
                <a class="navbar-item"
                   href="../categories/index.html">
                    Categories
                </a>
            

        </div>

        <div class="navbar-end">
            
                <a class="navbar-item" id="kbb-config-github"
                   href="https://github.com/xxx">
                <span class="icon has-text-black">
                    <i class="fab fa-github" aria-hidden="true"></i>
                </span>
                </a>
            
            
                <a class="navbar-item" id="kbb-config-twitter"
                   href="https://twitter.com/xxx">
                <span class="icon has-text-info">
                    <i class="fab fa-twitter" aria-hidden="true"></i>
                </span>
                </a>
            
        </div>
    </div>
</nav>
</section>
<section
        class="hero is-light"
        style="">
    <div class="hero-head">
    </div>
    
</section>

<section class="section content article"
         id="kbb-sphinx-body">
    
    <div class="container">
        <div class="columns">
            <div class="column sb_body">
                <div class="title is-1">Resources</div>
                <div id="kbb-sphinx-body"><div class="section" id="resources">
<h1>Resources<a class="headerlink" href="#resources" title="Permalink to this headline">¶</a></h1>
<p>Resources are the heart of Kaybee. They allow a Sphinx page to become a unit
of knowledge which can be listed, queried, and referenced. You simply embed
some YAML into a document to turn it into a resource. If you provide a bad
value, an associated schema will tell you.</p>
<p>You can use the built-in resource, make your own kinds of resources, or use
Kaybee plugins such as <code class="docutils literal notranslate"><span class="pre">articles</span></code> that provide ready-to-go systems of
resource types and related parts such as widgets.</p>
<p>We saw in the <a class="reference internal" href="../features.html#features-resources"><span class="std std-ref">resources tutorial</span></a> the
basics of using resources. Let’s cover them a bit more in depth.</p>
<div class="section" id="base-resource">
<h2>Base Resource<a class="headerlink" href="#base-resource" title="Permalink to this headline">¶</a></h2>
<p>The base resource, available in RST with <code class="docutils literal notranslate"><span class="pre">..</span> <span class="pre">resource::</span></code> and in Python as a
base class, represents the basic building block of a unit of information in
Kaybee. Add a little bit of YAML to your document and things spring into
action:</p>
<ul class="simple">
<li>Embedding some (schema validated) data available as <code class="docutils literal notranslate"><span class="pre">props</span></code></li>
<li>Controlling the template used to render</li>
<li>Assembling a hierarchy of parents</li>
<li>Rendering information to JSON, e.g. for use in the debugdumper</li>
<li>Adding an instance of that resource to a “database” hanging off the
Sphinx app</li>
<li>Making the resource instance available in the Jinja2 template</li>
</ul>
<p>Let’s go through the basics.</p>
<div class="section" id="the-base-directive">
<h3>The Base Directive<a class="headerlink" href="#the-base-directive" title="Permalink to this headline">¶</a></h3>
<p>Sphinx (actually reStructuredText) has a concept of
<a class="reference external" href="http://www.sphinx-doc.org/en/master/rest.html#directives" title="(in Sphinx v1.8.0+)"><span class="xref std std-ref">directives</span></a> – sort of like tags in HTML. RST and
Sphinx have a bunch of directives built-in, but you can also register
your own directives.</p>
<p>That’s what Kaybee does. You define “kinds of things” called <em>resource
types</em> and Kaybee generates directives which you can put in your document.
As a convenience, Kaybee has a <code class="docutils literal notranslate"><span class="pre">resource</span></code> directive – a very simple,
minimal way to get started.</p>
<p>Sphinx directives have some information that goes inside of them. Kaybee
directives treat that information as YAML which gets validated against a
schema using a package called. The result of this
validation is stored on the resource instance’s <code class="docutils literal notranslate"><span class="pre">props</span></code> attribute.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">resource</span></code> directive only has 2 things that can go in its YAML:</p>
<ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">template</span></code>, an optional string which chooses a template for <em>this</em>
document</li>
<li><code class="docutils literal notranslate"><span class="pre">acquireds</span></code>, which we talk about below under <em>Parents</em></li>
</ul>
</div>
<div class="section" id="the-resource">
<h3>The Resource<a class="headerlink" href="#the-resource" title="Permalink to this headline">¶</a></h3>
<p>Every Sphinx page gets turned into a basic “resource”, even if you don’t put
the directive. Resource data is stored on the Sphinx <code class="docutils literal notranslate"><span class="pre">app</span></code> object, which
Kaybee makes available in templates under the <code class="docutils literal notranslate"><span class="pre">sphinx_app</span></code> variable and
passes in to Kaybee event handlers.</p>
<p>Kaybee adds a <code class="docutils literal notranslate"><span class="pre">resources</span></code> collection to the Sphinx app, where it stores
resources, using the document’s <code class="docutils literal notranslate"><span class="pre">docname</span></code> as the key. For example, a Jinja2
template might grab a specific resource’s title with following:</p>
<div class="highlight-jinja notranslate"><div class="highlight"><pre><span></span><span class="x">&lt;div&gt;</span><span class="cp">{{</span> <span class="nv">sphinx_app.resources</span><span class="o">[</span><span class="s1">&#39;folder1/subfolder2/about&#39;</span><span class="o">]</span><span class="nv">.title</span> <span class="cp">}}</span><span class="x">&lt;/div&gt;</span>
</pre></div>
</div>
<p>Kaybee also makes a variable <code class="docutils literal notranslate"><span class="pre">resource</span></code> available in Jinja2 templates, bound
to the resource for the current docname.</p>
</div>
<div class="section" id="parents">
<h3>Parents<a class="headerlink" href="#parents" title="Permalink to this headline">¶</a></h3>
<p>Files on disk are organized into folders and subfolders. So are static
websites. And so is Sphinx, which has a
<a class="reference external" href="http://www.sphinx-doc.org/en/master/markup/toctree.html#toctree-directive" title="(in Sphinx v1.8.0+)"><span class="xref std std-ref">sphinx:toctree directive</span></a> which lets a document
list (in order or wildcard) its children. As such, Sphinx has a very strong
concept of hierarchy in a document collection.</p>
<p>As you organize your <code class="docutils literal notranslate"><span class="pre">.rst</span></code> documents into folders and subfolders, you might
have reasons to look at your Kaybee resource’s “parents”. For example:</p>
<ul class="simple">
<li>Use templating to assemble breadcrumbs</li>
<li>Divide your site into “sections” and show which section is active</li>
<li>Do queries to find only resources in a certain section</li>
<li>Avoid repetition by pushing some common properties or policies to parent
folders’ YAML</li>
</ul>
<p>Kaybee keeps track of parents by storing the immediate-parent docname on each
resource, with the root being the first in the sequence. Thus, for a docname
of <code class="docutils literal notranslate"><span class="pre">folder1/subfolder2/about</span></code>, the parents would be:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="s1">&#39;index&#39;</span><span class="p">,</span> <span class="s1">&#39;folder1/index&#39;</span><span class="p">,</span> <span class="s1">&#39;subfolder2/index&#39;</span><span class="p">]</span>
</pre></div>
</div>
<p>The resource has a method <code class="docutils literal notranslate"><span class="pre">parents</span></code> which, when passed the resources
collection, will return the actual resource objects for each parent. This
can be used in templates.</p>
</div>
<div class="section" id="acquired-properties">
<h3>Acquired Properties<a class="headerlink" href="#acquired-properties" title="Permalink to this headline">¶</a></h3>
<p>Sometimes you have properties that might appear in all, or some, documents
in part of your site. You’d prefer to define the property once, at the
top of that part of the tree, then have child nodes “acquire” them as
needed. Like inheritance, but for data instead of classes. And like
inheritance, a child can provide its own value instead of “acquiring” it
from its parentage.</p>
<p>This is particularly useful for system-oriented properties such as template
name. You might want all the templates for a certain part of the site to
be customized. Or you might want a custom template only for a certain
resource type.</p>
<p>Kaybee supports setting an <code class="docutils literal notranslate"><span class="pre">acquired</span></code> mapping value in the YAML of a node,
to provide property values for its ancestors. This mapping can provide
per-type mappings of properties or a mapping to apply to all types.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Regular properties have validated schemas. You can’t just add an
extra property. Acquired properties, though, allow anything inside
their mappings – the acquired property doesn’t have to be in a schema.</p>
</div>
<p>Here’s an example of a parent which takes control of different kinds of
children:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">..</span> <span class="n">aqsection</span><span class="p">::</span>
    <span class="n">template</span><span class="p">:</span> <span class="n">folder1_section</span>
    <span class="n">acquireds</span><span class="p">:</span>
        <span class="n">aqarticle</span><span class="p">:</span>
            <span class="n">template</span><span class="p">:</span> <span class="n">root_article</span>
            <span class="n">flag</span><span class="p">:</span> <span class="mi">99</span>
        <span class="n">aqsection</span><span class="p">:</span>
            <span class="n">template</span><span class="p">:</span> <span class="n">root_section</span>

<span class="o">==============</span>
<span class="n">Folder</span> <span class="mi">1</span> <span class="n">Stuff</span>
<span class="o">==============</span>

<span class="n">Body</span><span class="o">.</span>

<span class="o">..</span> <span class="n">toctree</span><span class="p">::</span>

    <span class="n">about</span>
    <span class="n">subfolder2</span><span class="o">/</span><span class="n">index</span>
</pre></div>
</div>
<p>This document says that anything anywhere under <code class="docutils literal notranslate"><span class="pre">folder</span></code> can look up
certain prop values based on resource type (or <code class="docutils literal notranslate"><span class="pre">all</span></code>, for props that
any resource type can acquire.)</p>
<p>It isn’t just <code class="docutils literal notranslate"><span class="pre">template</span></code>…any property can be “pushed up” to a parent,
grandparent, etc. But if one of the children defines that property locally,
it’s used instead of the parent’s property.</p>
</div>
</div>
<div class="section" id="todo">
<h2>TODO<a class="headerlink" href="#todo" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>Custom resource type, both in <code class="docutils literal notranslate"><span class="pre">conf.py</span></code> and in <code class="docutils literal notranslate"><span class="pre">kaybee_plugins</span></code></li>
<li>Putting local definitions in a docs project dir NOT named <code class="docutils literal notranslate"><span class="pre">kaybee_plugin</span></code></li>
<li>The current resource is available in templates as <code class="docutils literal notranslate"><span class="pre">resource</span></code></li>
<li>genericpage</li>
<li>Query.filter_collection</li>
<li>Uses the rtype as the base name (without <code class="docutils literal notranslate"><span class="pre">.html</span></code>) for the template</li>
</ul>
</div>
</div>
</div>

                
                
                    <section class="section kbb-listing">
                        <h2 class="title kbb-listing-heading">This Series</h2>
                        
                            
                            <div class="kbb-listing-item">
                                <div class="kb-listing-title">
                                    <a href="installation.html.html">Installation</a>
                                </div>
                                
                                    <div class="kb-listing-excerpt">
                                        For now, Kaybee expects you to generate a Sphinx project, then edit the
doc project and its conf.py file.
                                    </div>
                                
                            </div>
                        
                            
                            <div class="kbb-listing-item">
                                <div class="kb-listing-title">
                                    <a href="settings.html.html">Settings</a>
                                </div>
                                
                                    <div class="kb-listing-excerpt">
                                        When your make a docs project, you need a way to supply some settings to
various pieces in Kaybee. Perhaps you want to turn on debugdump (a core
plugin.) Perhaps you want to supply your GitHub name for a Kaybee theme.
                                    </div>
                                
                            </div>
                        
                            
                            <div class="kbb-listing-item kbb-listing-active">
                                <div class="kb-listing-title">
                                    <a href="#.html">Resources</a>
                                </div>
                                
                                    <div class="kb-listing-excerpt">
                                        Resources are the heart of Kaybee. They allow a Sphinx page to become a unit
of knowledge which can be listed, queried, and referenced. You simply embed
some YAML into a document to turn it into a resource. If you provide a bad
value, an associated schema will tell you.
                                    </div>
                                
                            </div>
                        
                            
                            <div class="kbb-listing-item">
                                <div class="kb-listing-title">
                                    <a href="templates.html.html">Templates</a>
                                </div>
                                
                                    <div class="kb-listing-excerpt">
                                        You can override templates in a docs project. Simply put a _templates
directory next to your conf.py file. Then put your templates in there.
This uses the normal Sphinx layered namespace approach to template location,
but templates in this directory override any with the same name in other
directories.
                                    </div>
                                
                            </div>
                        
                            
                            <div class="kbb-listing-item">
                                <div class="kb-listing-title">
                                    <a href="widgets.html.html">Widgets</a>
                                </div>
                                
                                    <div class="kb-listing-excerpt">
                                        Uses the wtype as the base name (without .html) for the template
                                    </div>
                                
                            </div>
                        
                            
                            <div class="kbb-listing-item">
                                <div class="kb-listing-title">
                                    <a href="references.html.html">References</a>
                                </div>
                                
                            </div>
                        
                            
                            <div class="kbb-listing-item">
                                <div class="kb-listing-title">
                                    <a href="genericpage.html.html">Generic Page</a>
                                </div>
                                
                                    <div class="kb-listing-excerpt">
                                        Don’t have to put a “resource” on everything
                                    </div>
                                
                            </div>
                        
                            
                            <div class="kbb-listing-item">
                                <div class="kb-listing-title">
                                    <a href="acquireds.html.html">Acquireds</a>
                                </div>
                                
                                    <div class="kb-listing-excerpt">
                                        Imagine a section of a site with some properties that appear over and over.
Putting them into every document kinda sucks. Wouldn’t it be great to
store them on a folder?
                                    </div>
                                
                            </div>
                        
                    </section>
                
            </div>

            <div class="column is-3">
                <aside id="sidebarCollapseTarget" class="menu kbb-sidenav">

    <div id="kb-sidenav-published-heading">
        
            <p class="menu-label">
                Published
            </p>
            <ul class="menu-list">
                <li>
                        Published on
                        2018-01-02
                        at
                        12:01.
                </li>
            </ul>
        
    </div>

    
    
    <p class="menu-label">
        Breadcrumbs
    </p>
    <ul class="menu-list">
            <li>
                <a href="index.html">
                    
                        <span class="kb-breadcrumb-separator">></span>
                    
                    Using Kaybee
                </a>
            </li>

    </ul>
    

    
    <p class="menu-label">
        Previous
    </p>
    <ul class="menu-list">
        <a href="settings.html"
           title="previous chapter">Settings</a>
    </ul>
    

    
    <p class="menu-label">
        Next
    </p>
    <ul class="menu-list">
        <a href="templates.html"
           title="next chapter">Templates</a>
    </ul>
    

    
    

    
        <div id="kb-sidenav-categories-heading">
            <p class="menu-label">
                Categories
            </p>
            <p>
                
                    <a href="/../categories/pydantic.html">
                        <span class="tag">pydantic</span>
                    </a>
                
            </p>
        </div>
    
</aside>
            </div>
        </div>
    </div>

</section>

<footer class="footer is-light">
    <div class="container">
        <div class="content has-text-centered">
            <p>
                Powered by Kaybee, which uses
                <a href="http://www.sphinx-doc.org/en/stable/">Sphinx</a>,
                <a href="http://bulma.io">Bulma</a>,
                <a href="http://dectate.readthedocs.io/en/latest/">Dectate</a>,
                <a href="https://pydantic-docs.helpmanual.io">pydantic</a>,
                and more.
            </p>
            <p id="kb-config-copyright">
                &copy; 2018, All Rights Reserved
            </p>
        </div>
    </div>
</footer>
<script type="text/javascript">
    var DOCUMENTATION_OPTIONS = {
        URL_ROOT: '',
        VERSION: '0.1.4',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true,
        SOURCELINK_SUFFIX: '.txt'
    };
</script>

</body>
</html>
